<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cycleCalendrier</title>
    <link rel="stylesheet" href="/chat-version/component/cycleCalendar/evo-calendar.midnight-blue.min.css">
    <link rel="stylesheet" href="/chat-version/component/cycleCalendar/evo-calendar.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.js"></script>
<script>
    $(document).ready(function(){
        // Open modal on page load
        
 
        // Close modal on button click
        $(".btn").click(function(){
            $("#myModal").modal('hide');
        });
    });
</script>
<style>
    .bs-example{
        margin: 20px;
    }
</style>
</head>
<body>
    <div class="hero">
    <div id="calendar"></div>
    <div class="bs-example">
        <div id="myModal" class="modal fade" tabindex="-1" style="margin-top: 165px;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="display: none;">
                        <h5 class="modal-title"></h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>Ceci est le jour du début de votre Cycle menstruel.</p>
                        <span>Durée de votre Cycle ? <input type="date" name="jour" id="laDuréeDuCycle" style="border-color: blue;"></span> 
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="validerJourCycle">Valider</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    
    <script>
        // Initialize evo-calendar in your script file or an inline <script> tag
        $(document).ready(function() {
            var now = moment()
           
            var validerJourCycle = document.getElementById('validerJourCycle')
            $('#calendar').evoCalendar({
              
               
            })
            setTimeout(()=>{
			
				},5000)
            $('#calendar').on('selectDate', function(event, newDate, oldDate) {
             var now = new Date()
             
             if(now ){
                $("#myModal").modal('show');
                console.log('On a chaud de vous hein ' + now);
             }else{
                alert('Vous ne pouvez pas choisir un autre jour comme votre premier jour des règles')
             }
               
                
            });

            validerJourCycle.addEventListener("click", function () {
                var now = new Date()
                var NumberlaDuréeDuCycle = document.getElementById('laDuréeDuCycle').value
                
                

                function addDaysToDate(date, days){
                var res = new Date(date);
                res.setDate(res.getDate() + days);
                return res;
            }

            var now = new Date(); // Augest 20, 2020
            console.log('On a chaud ' + NumberlaDuréeDuCycle);

            //diff entre jour
            var now = new Date(); 
            var date2 = new Date(NumberlaDuréeDuCycle); 
            var Diff_temps = date2.getTime() - now.getTime(); 
            var Diff_jours = Diff_temps / (1000 * 3600 * 24); 
            console.log("Le nombre de jours entre les deux dates est de " + Math.round(Diff_jours) + " jours")
            var momm = moment(new Date(NumberlaDuréeDuCycle)).subtract(14, 'days').calendar()
            var momm1 = moment(new Date(NumberlaDuréeDuCycle)).subtract(15, 'days').calendar()
            var momm2 = moment(new Date(NumberlaDuréeDuCycle)).subtract(16, 'days').calendar()
            var momm3 = moment(new Date(NumberlaDuréeDuCycle)).subtract(17, 'days').calendar()
            console.log('nous sommes en route mes frères ' + NumberlaDuréeDuCycle +' et ' + momm)

                $('#calendar').evoCalendar('addCalendarEvent', [
                
                {
                id: 'kNybja6',
                name: 'Début de mon cycle',
                badge: "02/13 - 02/15", // Event badge (optional)
                description: 'Votre cycle menstruel est de ' + Math.round(Diff_jours) + ' jours',
                date: now,
                type: 'birthday',
                color: "#63d867"
                
                },
                {
                id: 'kNybja6786',
                name: 'Ovulation',
                badge: "02/13 - 02/15", // Event badge (optional)
                description: 'Lorem ipsum dolor sit..',
                date: momm,
                type: 'birthday',
                color: 'red'
                },
                {
                id: 'kNybja6786',
                name: 'Ovulation',
                badge: "02/13 - 02/15", // Event badge (optional)
                description: 'Lorem ipsum dolor sit..',
                date: momm1,
                type: 'birthday',
                color: 'red'
                },
                {
                id: 'kNybja6786',
                name: 'Ovulation',
                badge: "02/13 - 02/15", // Event badge (optional)
                description: 'Lorem ipsum dolor sit..',
                date: momm2,
                type: 'birthday',
                color: 'red'
                },
                {
                id: 'kNybja6786',
                name: 'Ovulation',
                badge: "02/13 - 02/15", // Event badge (optional)
                description: 'Lorem ipsum dolor sit..',
                date: momm3,
                type: 'birthday',
                color: 'red'
                },
                {
                id: 'kNybja6hd',
                name: 'Début de mon cycle',
                description: 'Lorem ipsum dolor sit..',
                date: addDaysToDate(momm, 1),
                type: 'birthday',
                color: 'red'
                },
                {
                id: 'kNybja6hd',
                name: 'Début de mon cycle',
                description: 'Lorem ipsum dolor sit..',
                date: addDaysToDate(momm, 2),
                type: 'birthday',
                color: 'red'
                },
                {
                id: 'kNybja6hd',
                name: 'Début de mon cycle',
                description: 'Lorem ipsum dolor sit..',
                date: addDaysToDate(momm, 3),
                type: 'birthday',
                color: 'red'
                },
                {
                id: 'kNybja6&é',
                name: "Vacation Leave",
                badge: "02/13 - 02/15", // Event badge (optional)
                date: NumberlaDuréeDuCycle, // Date range
                description: "Vacation leave for 3 days.", // Event description (optional)
                type: "event",
                color: "#63d867" // Event custom color (optional)
            }]
                
                );
        });
        })
    </script>
    <script src="/chat-version/component/cycleCalendar/evo-calendar.min.js"></script>
</body>
</html>